<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<title>VHDL SD2100 UCF FILE GENERATOR</title>
	<script type="text/javascript" src="./reference/jquery-1.11.1.min.js"></script>
</head>

<body>

<!--  component
  	clk,rst:in STD_LOGIC; -- system clock,reset signal
    mcs,mwr,mrd,mbh,mbl: out STD_LOGIC; -- select ,write ,read ,high byte of word,low byte of word signal for MEMORY
    iocs,iowr,iord: out STD_LOGIC; -- select ,write ,read for IO
    addr16,data16:INOUT STD_LOGIC_VECTOR(15 downto 0):=(others =>'Z') -- address bus; data bus 
-->
<!-- 
	clk,rst,mcs,mwr,mrd,mbh,mbl,iocs,iowr,iord,addr16,data16
-->
	<textarea id="component" >
	clk,rst:in STD_LOGIC; -- system clock,reset signal
    mcs,mwr,mrd,mbh,mbl: out STD_LOGIC; -- select ,write ,read ,high byte of word,low byte of word signal for MEMORY
    iocs,iowr,iord: out STD_LOGIC; -- select ,write ,read for IO
    addr16,data16:INOUT STD_LOGIC_VECTOR(15 downto 0):=(others =>'Z') -- address bus; data bus 
	</textarea>
	<textarea id="portmap" ></textarea>
	<script type="text/javascript">
		var debug = true;
		var formatdata=[];
		var datatype={};
		function gettype (str) {
			var tl = (str.replace(")","")).split("(");
			var type = {};
			type["name"] = tl[0].toLowerCase();
			if (type["name"]=="std_logic_vector") {
				var tlsplit = tl[1].split(/(downto|to)/);
				type["begin"] = Number(tlsplit[0]);
				type["end"] = Number(tlsplit[2]);
			};
			return type;
		}

		$(function() {
			// 0 - get data
			var txt = $("#component").val();
			if (debug) {console.log("[get txt]"+txt)};
			// 1 - remove comment , in|out cmp,init valuable and blank
			txt = txt.replace(/--.*?\n/g,"\n");
			if (debug) {console.log("[replaced txt 0]"+txt)};
			txt = txt.replace(/(in|out|inout) /ig,"");
			if (debug) {console.log("[replaced txt 1]"+txt)};
			txt = txt.replace(/\:\=.*?\n/g,"");
			if (debug) {console.log("[replaced txt 2]"+txt)};
			txt = txt.replace(/[\s]/g,"");
			if (debug) {console.log("[replaced txt 3]"+txt)};
			// 2 - slice
			var itemlist = txt.split(";");
			for (var i = 0;i < itemlist.length ; i++) {
				var value_type = itemlist[i].split(":");
				var valuelist = value_type[0].split(",");
				var type = gettype(value_type[1]);
				for (var j = 0;j < valuelist.length ; j++) {
					formatdata.push(valuelist[j]);
					datatype[valuelist[j]]=type;
				}
			};




		})
	</script>
</body>
</html>